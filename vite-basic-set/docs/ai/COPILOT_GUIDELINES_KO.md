# Copilot 사용 가이드 (한국어 간단 버전)
> 목표: “확장성·가독성·일관성”을 해치지 않도록 Copilot 제안(자동 생성 코드)의 품질과 방향을 최소 규칙으로 관리한다.

---

## 1. 핵심 원칙 (TL;DR)
- 한글 주석 / 한글 설명 (외부 라이브러리 고유명/약어 제외)
- “지금 필요한 최소”만 수용 → 과도한 추상화/패턴 거절
- FSD 관점: widgets / pages / features / entities / shared 책임 분리 유지
- 도메인 의도 / 부작용 / 예외 처리 명확히
- 제안 = 초안. 무비판적 수용 금지 (검증 → 편집 → 채택)

---

## 2. Copilot에게 원하는 방향 (프롬프트 예시)
| 상황 | 프롬프트 패턴 |
|------|---------------|
| 단순 유틸 | “입력: 문자열 배열, 출력: 중복 제거 + 정렬. O(n log n) 이내. 주석 한글.” |
| 비즈니스 로직 | “주문 금액 검증 함수. 실패 사유 enum 반환. 한국어 주석. 확장 가능한 형태.” |
| 컴포넌트 | “재사용 버튼 컴포넌트. variant/size 지원. Tailwind. 접근성 고려. 한글 주석.” |
| 리팩터 | “복잡 if 분기 → 전략 패턴 또는 작은 함수 분리. 부작용 최소화. 한국어 설명.” |

프롬프트 규칙:
1. “무엇 + 왜 + 제약(성능/확장/예외)” 포함
2. 반환 형식/타입 지정 (TS interface / union 요구)
3. “한글 주석” 명시
4. 필요 시 “테스트용 예시 2~3개 포함” 요청

---

## 3. 생성 코드 수락 체크리스트
- [ ] 함수/컴포넌트 이름이 의도 표현
- [ ] 불필요한 조기 최적화 / 패턴(팩토리, 싱글톤 등) 없음
- [ ] 한글 주석, “왜” 포함
- [ ] 예외 / 실패 케이스 다룸 (또는 TODO로 명시)
- [ ] 전역 상태/side-effect 누락 없음
- [ ] 라이선스/외부 출처 없는 순수 생성 (의심 시 재작성)

---

## 4. FSD 구조 관점 가이드
| 레이어 | Copilot 제안 수용 범위 |
|--------|-----------------------|
| pages  | 데이터 조합 / 페이지 스코프 상태 |
| widgets | 레이아웃/복합 UI 래핑 (상태 최소) |
| features | 사용자 행동(예: 로그인, 필터, 생성) 로직 |
| entities | 도메인 모델/타입/불변 로직 |
| shared | 유틸, 디자인 토큰, 공통 훅/컴포넌트 |

경고: Copilot이 pages 에서 곧바로 도메인 연산(가격 계산 등) 넣으면 entities/feature 로 이동.

---

## 5. 스타일 / 품질 규칙 (요약)
- TypeScript: any 지양 → 명확한 타입 or generic
- 함수 길이: 40~50줄 넘으면 분리 고려
- boolean 인자 금지 → 옵션 객체
- Tailwind: 의미 중복/충돌 시 정리 (Copilot이 중복 class 제안 시 수동 정리)
- async 흐름: 에러 처리 (try/catch + 에러 래핑 or 반환 타입 Result 패턴)

---

## 6. 금지 / 경계 패턴
| 항목 | 설명 |
|------|------|
| 사용 안 하는 임시 추상화 | BaseManager, HelperFactory 등 목적 불명 |
| 조기 클래스화 | 데이터/로직 간단한데 class 생성 |
| 깊은 중첩 if | 가드 클로저(early return) 요청 |
| 숨은 전역 mutable | 모듈 스코프 캐시/Map 무근거 생성 |
| 주석 없는 마법 숫자 | 상수화 필요 |
| 무분별 default export | 의미 있는 이름의 named export 선호 |

---

## 7. 좋은 프롬프트 예 / 나쁜 예
| 구분 | 예시 |
|------|------|
| 👍 | “상품 가격 합계 계산: 할인(%) → 소수점 2자리 고정 → 총 VAT(10%). 예외: 음수/NaN 입력 시 오류 throw. 한글 주석.” |
| 👎 | “가격 계산 함수 만들어줘” |
| 👍 | “React 탭 컴포넌트: 키보드 접근(ArrowLeft/Right), 선택 상태 aria 속성, variant=underline | filled. 한글 주석.” |
| 👎 | “탭 컴포넌트” |

---

## 8. 코드 삽입 후 해야 할 일
1. 불필요 import / dead code 제거
2. 타입 any / unknown → 구체화
3. TODO → 이유 + 추적 근거(예: // TODO: 서버 스키마 확정 후 정규화 추가)
4. 테스트 초안 or 사용 예 주석 추가
5. 문맥 맞지 않는 영어 주석 한글화

---

## 9. 예시 (Copilot 제안 → 정제)
Before (제안):
```ts
export function sum(a:number,b:number,discount?:number){return (a+b)-(discount||0)}
```
After (정제):
```ts
/**
 * 두 금액 합산 후 할인 금액(절대값)을 차감한다.
 * @param a 첫 번째 금액 (원 단위, 0 이상)
 * @param b 두 번째 금액 (원 단위, 0 이상)
 * @param discount 차감할 할인 금액 (기본 0)
 * @throws RangeError 음수 입력 시
 */
export function sumAmounts(a: number, b: number, discount = 0): number {
  if (a < 0 || b < 0 || discount < 0) {
    throw new RangeError("금액/할인 값은 음수일 수 없습니다.");
  }
  return a + b - discount;
}
```

---

## 10. PR 리뷰 시 Copilot 흔적 판별 팁
- 비일관한 네이밍 스타일 (e.g. doThing / handle_action 혼재)
- 영어 주석 + 한글 주석 섞여 있음
- 미사용 import / eslint disable 주석 자동 추가
→ 발견 시: “원문 의도 / 재작성 / 주석 한글화” 피드백

---

## 11. 협업 시 규칙
| 상황 | 행동 |
|------|------|
| 다량 자동 생성 제안 | 작은 커밋 단위로 쪼개 재검토 |
| 모호한 로직 | PR 설명에 “생성 후 수동 수정 범위” 기재 |
| 주석 누락 | 코멘트로 의도 역질문 (Why? 예외?) |
| 추상화 제안 | 재사용 3회 이상 전망? 없다면 보류 |

---

## 12. Copilot 거절이 필요한 순간
- “나중에 필요할 것 같아 보이는” 추상 레이어
- 이미 존재하는 유틸/컴포넌트 중복 구현
- 테스트 없이 복잡한 비동기/동시성 처리 제안
- 팀 합의된 가이드(한글 주석, FSD 책임 분리) 미준수

---

## 13. 빠른 점검 시트 (개발자 본인용)
- [ ] 한글 주석 / “왜” 설명
- [ ] 불필요 추상화 제거
- [ ] 타입 명확
- [ ] 부작용/에러 처리
- [ ] 재사용 후보 분리 여부 판단
- [ ] TODO 근거 기록
- [ ] 구조(FSD) 레이어 침범 없음

---

## 14. 마무리
Copilot은 “속도를 높이는 보조 도구”이지 “설계 책임”을 대체하지 않는다.  
생성된 결과를 구조적 맥락(FSD)과 팀 규칙(주석/명명/확장성)에 맞춰 ‘편집’하는 과정이 필수다.

> 규칙 개선 필요 시: docs/ai/COPILOT_GUIDELINES_KO.md PR 로 수정 제안.

(끝)